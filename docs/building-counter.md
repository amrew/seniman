# Building a Counter

In this tutorial, we will create a simple counter application using Seniman. We will start with a basic Seniman project template, and then we will add a counter component to it.

To initialize a basic Seniman project, run the following command:

```bash
npx new-seniman-app@latest
```

Choose `express-basic` for the project template and `my-app` for the project name when prompted. This will create a new directory called `my-app` inside the current folder. Let's move to that directory:

```bash
cd my-app
```
Inside the newly created project, let's install the dependencies:

```bash
npm i
```

Then, run the following command to start the development server:

```bash
npm run dev
```

You will see the application running at [http://localhost:3002](http://localhost:3002). The page will automatically reload if you make edits to the source code.

Let's take a first look at the main file generated by the `new-seniman-app` command -- `src/index.js`:

```js
import express from 'express';
import { wrapExpress } from 'seniman/express';

let app = express();
wrapExpress(app, { Head, Body });

app.listen(process.env.PORT || 3002);

const cssText = `
body,
* {
  padding: 0;
  margin: 0;
  font-family: sans-serif;
  padding: 10px;
}
`;

function Head() {
  return <>
    <style>{cssText}</style>
  </>;
}

function Body() {
  return <div>Hello World</div>;
}
```

Seems like your standard Express application, with some unusual sight of JSX functions right alongside the Express instance. Let's start breaking down the file.

```js
let app = express();

wrapExpress(app, { Head, Body });

app.listen(process.env.PORT || 3002);
```

The `wrapExpress` function is a function provided by Seniman that wraps the Express application. The `wrapExpress` function takes two arguments: the Express application object, and an object containing the `Head` and `Body` components, which make up the user interface of the application. As their name suggests, the `Head` component is used to render the `<head>` element of the HTML document, and the `Body` component is used to render the `<body>` element of the HTML document.

Let's take a look at the `Head` component.

```js
const cssText = `
body,
* {
  padding: 0;
  margin: 0;
  font-family: sans-serif;
  padding: 10px;
}
`;

function Head() {
  return <>
    <style>{cssText}</style>
  </>;
}

```

The `Head` component's pretty standard; tags that you usually put in the `<head>` element of the HTML document, you can put here. You can see there's the style tags there that we use to set some basic styles for the application. You can add more tags here, such as `<link>` tags to load external CSS files, or `<title>` tags to set the title of the page.

And now, where all the fun happens -- the `Body` component:

```js
function Body(props) {
  return <div>Hello World</div>;
}
```

The `Body` component is the heart of your user interface. You can start putting HTML elements or your own components in here. We came here to build a counter application, so let's do that. First, let's create a placeholder `Counter` component:

```js
function Counter(props) {
  return <div></div>;
}
```

and refer it from the `Body` component:

```js
function Body(props) {
  return <Counter />;
}
```

Next, let's create a state to represent the counter value:

```js
function Counter(props) {
  let [getCount, setCount] = useState(0);
  
  return <div></div>;
}
```

We use the `useState` function to create a state. You might already be familiar with `useState` in other frameworks, such as React. {add more info about state}. 

`useState` takes an initial value as its argument, and returns an array containing two functions: the first function is used to get the current value of the state, and the second function is used to set the value of the state. We will use the `getCount` function to get the current value of the counter, and we will use the `setCount` function to set the value of the counter.

Let's now create a button to increment the counter:

```js
function Counter(props) {
  let [getCount, setCount] = useState(0);

  return <div>
    <button onClick={() => setCount(getCount() + 1)}>
      Increment
    </button>
  </div>;
}
```

Looks good. But now, all we've created is a button that changes a value that doesn't get displayed anywhere. Let's fix that by displaying the current value of the counter:

```js
function Counter(props) {
  let [getCount, setCount] = useState(0);

  return <div>
    <button onClick={() => setCount(getCount() + 1)}>
      Increment
    </button>
    <div>Counter: {getCount()}</div>
  </div>;
}
```

If you look at the page now, we have a working counter!

Let's make it a little more interesting by adding a button to decrement the counter:

```js

function Counter(props) {
  let [getCount, setCount] = useState(0);

  return <div>
    <button onClick={() => setCount(getCount() + 1)}>
      Increment
    </button>
    <button onClick={() => setCount(getCount() - 1)}>
      Decrement
    </button>
    <div>Counter: {getCount()}</div>
  </div>;
}
```

We can now count in both directions. But there's a problem -- if you click the decrement button when the counter is 0, the counter will go into negative numbers. Let's fix that by adding a check to make sure the counter doesn't go below 0:

```js
function Counter(props) {
  let [getCount, setCount] = useState(0);

  return <div>
    <button onClick={() => setCount(getCount() + 1)}>
      Increment
    </button>
    <button onClick={() => setCount(Math.max(0, getCount() - 1))}>
      Decrement
    </button>
    <div>Counter: {getCount()}</div>
  </div>;
}
```

And that's it, you've built your first counter application in Seniman. 

You might be wondering if there is another front-end aspect to this that we need to set up. The answer is no. Seniman, and your application code, runs entirely on the server. The full component tree will be executed and maintained by the server, and Seniman will take care to send only the minimum amount of DOM manipulation commands to the browser through an efficient binary protocol running on WebSocket. You can read more about that here (add some link here).